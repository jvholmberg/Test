"use strict";angular.module("app").directive("cameraLine",function(){return{restrict:"E",scope:{pointsArr:"="},template:'<canvas class="canvas-line" width="700" height="500"></canvas>',controller:function(n,t,o,e){function i(){return"camera-line-in"===t[0].id}function r(e){e.stopPropagation();var i={x:e.offsetX,y:e.offsetY};a.isPointInStroke(i.x,i.y)&&(n.pointsArr.push(i),t.append(o(angular.element('<camera-line-point xpos="'+i.x+'" ypos="'+i.y+'"></camera-line-point>'))(n)))}console.log(n);var a=document.getElementsByClassName("canvas-line");a=i()?a[1].getContext("2d"):a[0].getContext("2d"),n.drawLine=function(){a.clearRect(0,0,a.width,a.height),a.beginPath();for(var t=1;t<n.pointsArr.length;t++)a.moveTo(n.pointsArr[t-1].x,n.pointsArr[t-1].y),a.lineTo(n.pointsArr[t].x,n.pointsArr[t].y);a.lineWidth=4,a.strokeStyle="red",a.stroke()},e.on("tap click",r)},link:function(n,t){n.drawLine()}}}).directive("cameraLinePoint",function(){return{restrict:"E",scope:{xpos:"=",ypos:"="},controller:function(n){},link:function(n,t){function o(n){n.stopPropagation(),n.preventDefault(),t.on("touchmove mousemove",e),t.on("touchend mouseup",i)}function e(n){n.stopPropagation(),console.log(t);var o=n.clientX,e=n.clientY;t.css({left:o+"px",top:e+"px"})}function i(n){n.stopPropagation()}function r(n){n.stopPropagation()}t.css({left:n.xpos+"px",top:n.ypos+"px"}),t.on("touchstart mousedown",o),t.on("tap click",r)}}});